# é˜¿é‡Œäº‘æœåŠ¡å™¨SSHè¿æ¥æŒ‡å—

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

åœ¨è¿æ¥ä¹‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **æœåŠ¡å™¨å…¬ç½‘IPåœ°å€** - åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°çš„å®ä¾‹åˆ—è¡¨ä¸­æŸ¥çœ‹
2. **SSHç«¯å£** - é»˜è®¤æ˜¯ `22`
3. **ç”¨æˆ·å** - Ubuntuç³»ç»Ÿé»˜è®¤ç”¨æˆ·åé€šå¸¸æ˜¯ `ubuntu` æˆ– `root`
4. **ç™»å½•æ–¹å¼**ï¼š
   - å¯†ç è®¤è¯ï¼ˆéœ€è¦çŸ¥é“å¯†ç ï¼‰
   - å¯†é’¥è®¤è¯ï¼ˆéœ€è¦ä¸‹è½½ç§é’¥æ–‡ä»¶ï¼‰

## ğŸ” å¦‚ä½•è·å–è¿æ¥ä¿¡æ¯

### 1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
è®¿é—®ï¼šhttps://ecs.console.aliyun.com

### 2. æ‰¾åˆ°ä½ çš„ECSå®ä¾‹
åœ¨å®ä¾‹åˆ—è¡¨ä¸­æ‰¾åˆ°ä½ çš„æœåŠ¡å™¨ï¼Œè®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š
- **å…¬ç½‘IPåœ°å€**ï¼šä¾‹å¦‚ `47.xxx.xxx.xxx`
- **å®ä¾‹ID**
- **æ“ä½œç³»ç»Ÿ**ï¼šUbuntu

### 3. ç¡®è®¤å®‰å…¨ç»„è§„åˆ™
ç¡®ä¿å®‰å…¨ç»„å·²å¼€æ”¾SSHç«¯å£ï¼ˆ22ï¼‰ï¼š
- åœ¨å®ä¾‹è¯¦æƒ…é¡µ â†’ å®‰å…¨ç»„ â†’ é…ç½®è§„åˆ™
- æ£€æŸ¥æ˜¯å¦æœ‰å…è®¸ç«¯å£22çš„å…¥æ–¹å‘è§„åˆ™
- å¦‚æœæ²¡æœ‰ï¼Œæ·»åŠ è§„åˆ™ï¼š`å…è®¸ TCP 22 ç«¯å£ï¼Œæˆæƒå¯¹è±¡ 0.0.0.0/0`

## ğŸ’» è¿æ¥æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å¯†ç è¿æ¥ï¼ˆæœ€ç®€å•ï¼‰

#### macOS / Linux ç³»ç»Ÿ

æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œï¼š

```bash
ssh username@your_server_ip
```

**ç¤ºä¾‹ï¼š**
```bash
# å¦‚æœç”¨æˆ·åæ˜¯ ubuntu
ssh ubuntu@47.100.200.300

# å¦‚æœç”¨æˆ·åæ˜¯ root
ssh root@47.100.200.300

# æŒ‡å®šç«¯å£ï¼ˆå¦‚æœä¸æ˜¯é»˜è®¤22ç«¯å£ï¼‰
ssh -p 22 ubuntu@47.100.200.300
```

é¦–æ¬¡è¿æ¥ä¼šæç¤ºï¼š
```
The authenticity of host '47.100.200.300' can't be established.
Are you sure you want to continue connecting (yes/no)?
```

è¾“å…¥ `yes` å›è½¦ï¼Œç„¶åè¾“å…¥å¯†ç å³å¯ã€‚

#### Windows ç³»ç»Ÿ

**æ–¹å¼1ï¼šä½¿ç”¨ PowerShell æˆ– CMDï¼ˆWindows 10/11ï¼‰**
```bash
ssh username@your_server_ip
```

**æ–¹å¼2ï¼šä½¿ç”¨ PuTTY å·¥å…·**
1. ä¸‹è½½å¹¶å®‰è£… PuTTY
2. æ‰“å¼€ PuTTY
3. åœ¨ Host Name è¾“å…¥æœåŠ¡å™¨IP
4. Port è¾“å…¥ 22
5. Connection Type é€‰æ‹© SSH
6. ç‚¹å‡» Open
7. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 

### æ–¹æ³•äºŒï¼šä½¿ç”¨å¯†é’¥å¯¹è¿æ¥ï¼ˆæ›´å®‰å…¨ï¼‰â­ æ¨è

#### 1. åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°åˆ›å»º/ä¸‹è½½å¯†é’¥å¯¹

**åˆ›å»ºæ–°å¯†é’¥å¯¹ï¼š**
- è¿›å…¥ ECS æ§åˆ¶å° â†’ ç½‘ç»œä¸å®‰å…¨ â†’ å¯†é’¥å¯¹
- ç‚¹å‡»"åˆ›å»ºå¯†é’¥å¯¹"
- ä¸‹è½½ç§é’¥æ–‡ä»¶ï¼ˆå¦‚ï¼š`my-key.pem`ï¼‰

**æˆ–ç»‘å®šå·²æœ‰å¯†é’¥å¯¹åˆ°å®ä¾‹ï¼š**
- å®ä¾‹åˆ—è¡¨ â†’ æ›´å¤š â†’ å¯†é’¥å¯¹ â†’ ç»‘å®šå¯†é’¥å¯¹
- ç»‘å®šåéœ€è¦é‡å¯å®ä¾‹

#### 2. è®¾ç½®å¯†é’¥æ–‡ä»¶æƒé™ï¼ˆmacOS/Linuxï¼‰

```bash
# å°†ä¸‹è½½çš„å¯†é’¥æ–‡ä»¶ç§»åˆ°å®‰å…¨ä½ç½®
mkdir -p ~/.ssh
mv ~/Downloads/my-key.pem ~/.ssh/

# ä¿®æ”¹æƒé™ï¼ˆå¿…é¡»æ‰§è¡Œï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼‰
chmod 400 ~/.ssh/my-key.pem
```

#### 3. ä½¿ç”¨å¯†é’¥è¿æ¥

```bash
ssh -i ~/.ssh/my-key.pem username@your_server_ip
```

**ç¤ºä¾‹ï¼š**
```bash
ssh -i ~/.ssh/aliyun-ecs.pem ubuntu@47.100.200.300
```

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨é˜¿é‡Œäº‘ç½‘é¡µç‰ˆå·¥ä½œå°ï¼ˆæœ€æ–¹ä¾¿ï¼‰

ä¸éœ€è¦ä»»ä½•é…ç½®ï¼Œç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿æ¥ï¼š

1. ç™»å½•é˜¿é‡Œäº‘ECSæ§åˆ¶å°
2. æ‰¾åˆ°ä½ çš„å®ä¾‹
3. ç‚¹å‡»å®ä¾‹å³ä¾§çš„"è¿œç¨‹è¿æ¥"
4. é€‰æ‹©"é€šè¿‡Workbenchè¿œç¨‹è¿æ¥"
5. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç å³å¯

## ğŸ¯ é…ç½®SSHå¿«æ·ç™»å½•ï¼ˆæ¨èï¼‰

ä¸ºäº†é¿å…æ¯æ¬¡éƒ½è¾“å…¥å®Œæ•´çš„å‘½ä»¤ï¼Œå¯ä»¥é…ç½®SSHå¿«æ·æ–¹å¼ï¼š

### ç¼–è¾‘SSHé…ç½®æ–‡ä»¶

```bash
# åˆ›å»ºæˆ–ç¼–è¾‘é…ç½®æ–‡ä»¶
nano ~/.ssh/config
```

### æ·»åŠ ä»¥ä¸‹å†…å®¹

```bash
 

# å¯ä»¥é…ç½®å¤šä¸ªæœåŠ¡å™¨
Host aliyun-prod
    HostName 47.100.200.301
    User root
    Port 22
    IdentityFile ~/.ssh/aliyun-prod.pem
```

### ä¿å­˜åï¼Œåªéœ€ç®€å•å‘½ä»¤å³å¯è¿æ¥

```bash
ssh aliyun
```

## ğŸ”’ å®‰å…¨å»ºè®®

### 1. ä¿®æ”¹é»˜è®¤SSHç«¯å£

```bash
# è¿æ¥åˆ°æœåŠ¡å™¨å
sudo nano /etc/ssh/sshd_config

# ä¿®æ”¹ Port 22 ä¸ºå…¶ä»–ç«¯å£ï¼Œå¦‚ 2222
Port 2222

# é‡å¯SSHæœåŠ¡ï¼ˆUbuntuç³»ç»Ÿä½¿ç”¨ sshï¼ŒCentOSç³»ç»Ÿä½¿ç”¨ sshdï¼‰
sudo systemctl restart ssh
```

âš ï¸ **æ³¨æ„**ï¼šä¿®æ”¹ç«¯å£åï¼Œè®°å¾—åœ¨é˜¿é‡Œäº‘å®‰å…¨ç»„ä¸­å¼€æ”¾æ–°ç«¯å£ï¼

### 2. ç¦ç”¨rootå¯†ç ç™»å½•

```bash
sudo nano /etc/ssh/sshd_config

# ä¿®æ”¹ä»¥ä¸‹é…ç½®
PermitRootLogin prohibit-password
PasswordAuthentication no

# é‡å¯SSHæœåŠ¡ï¼ˆUbuntuç³»ç»Ÿä½¿ç”¨ sshï¼ŒCentOSç³»ç»Ÿä½¿ç”¨ sshdï¼‰
sudo systemctl restart ssh
```

### 3. ä½¿ç”¨å¯†é’¥è®¤è¯ä»£æ›¿å¯†ç 

å¯†é’¥è®¤è¯æ¯”å¯†ç æ›´å®‰å…¨ï¼Œå»ºè®®ä½¿ç”¨æ–¹æ³•äºŒçš„å¯†é’¥å¯¹è¿æ¥ã€‚

## ğŸ› ï¸ å¸¸è§é—®é¢˜è§£å†³

### 0. SSHæœåŠ¡é‡å¯å¤±è´¥ (Unit sshd.service not found)

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Failed to restart sshd.service: Unit sshd.service not found.
```

**åŸå› ï¼š**Ubuntuç³»ç»Ÿçš„SSHæœåŠ¡åç§°æ˜¯ `ssh` è€Œä¸æ˜¯ `sshd`

**è§£å†³æ–¹æ³•ï¼š**
```bash
# Ubuntu/Debian ç³»ç»Ÿä½¿ç”¨
sudo systemctl restart ssh

# CentOS/RHEL ç³»ç»Ÿä½¿ç”¨
sudo systemctl restart sshd
```

### 1. è¿æ¥è¶…æ—¶ (Connection timed out)

**åŸå› å’Œè§£å†³æ–¹æ³•ï¼š**
- âœ… æ£€æŸ¥å®‰å…¨ç»„æ˜¯å¦å¼€æ”¾22ç«¯å£
- âœ… æ£€æŸ¥æœåŠ¡å™¨IPåœ°å€æ˜¯å¦æ­£ç¡®
- âœ… ç¡®è®¤ä½¿ç”¨çš„æ˜¯å…¬ç½‘IPè€Œä¸æ˜¯ç§ç½‘IP
- âœ… æ£€æŸ¥æœ¬åœ°ç½‘ç»œæ˜¯å¦æ­£å¸¸

### 2. Permission denied (publickey)

**åŸå› å’Œè§£å†³æ–¹æ³•ï¼š**
- âœ… ç”¨æˆ·åé”™è¯¯ï¼Œå°è¯• `ubuntu` æˆ– `root`
- âœ… å¯†é’¥æ–‡ä»¶æƒé™ä¸å¯¹ï¼š`chmod 400 å¯†é’¥æ–‡ä»¶`
- âœ… å¯†é’¥æ–‡ä»¶è·¯å¾„é”™è¯¯ï¼Œæ£€æŸ¥ `-i` å‚æ•°

### 3. WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!

**åŸå› ï¼š**æœåŠ¡å™¨é‡è£…ç³»ç»Ÿåï¼Œä¸»æœºæŒ‡çº¹å‘ç”Ÿå˜åŒ–

**è§£å†³æ–¹æ³•ï¼š**
```bash
ssh-keygen -R your_server_ip
```

### 4. å¯†é’¥æ–‡ä»¶æƒé™è¿‡å¼€æ”¾

**é”™è¯¯ä¿¡æ¯ï¼š**
```
WARNING: UNPROTECTED PRIVATE KEY FILE!
Permissions 0644 for 'key.pem' are too open.
```

**è§£å†³æ–¹æ³•ï¼š**
```bash
chmod 400 your_key.pem
```

### 5. å¿˜è®°äº†rootå¯†ç 

**è§£å†³æ–¹æ³•ï¼š**
- åœ¨é˜¿é‡Œäº‘æ§åˆ¶å° â†’ å®ä¾‹åˆ—è¡¨ â†’ æ›´å¤š â†’ å¯†ç /å¯†é’¥å¯¹ â†’ é‡ç½®å®ä¾‹å¯†ç 
- é‡ç½®åéœ€è¦é‡å¯å®ä¾‹

## ğŸ“ å®ç”¨SSHå‘½ä»¤

### æ–‡ä»¶ä¼ è¾“

```bash
# ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
scp local_file.txt ubuntu@47.100.200.300:/home/ubuntu/

# ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°
scp ubuntu@47.100.200.300:/home/ubuntu/remote_file.txt ./

# ä¸Šä¼ æ–‡ä»¶å¤¹
scp -r local_folder ubuntu@47.100.200.300:/home/ubuntu/

# ä½¿ç”¨å¯†é’¥
scp -i ~/.ssh/key.pem local_file.txt ubuntu@47.100.200.300:/home/ubuntu/
```

### ç«¯å£è½¬å‘

```bash
# æœ¬åœ°ç«¯å£è½¬å‘ï¼ˆè®¿é—®æœ¬åœ°8080ï¼Œå®é™…è®¿é—®è¿œç¨‹80ç«¯å£ï¼‰
ssh -L 8080:localhost:80 ubuntu@47.100.200.300

# è¿œç¨‹ç«¯å£è½¬å‘
ssh -R 8080:localhost:80 ubuntu@47.100.200.300
```

### ä¿æŒè¿æ¥ä¸æ–­å¼€

```bash
# ç¼–è¾‘æœ¬åœ°SSHé…ç½®
nano ~/.ssh/config

# æ·»åŠ ä»¥ä¸‹å†…å®¹
Host *
    ServerAliveInterval 60
    ServerAliveCountMax 3
```

## ğŸ“ å¿«é€Ÿä¸Šæ‰‹ç¤ºä¾‹

å‡è®¾ä½ çš„æœåŠ¡å™¨ä¿¡æ¯å¦‚ä¸‹ï¼š
- **å…¬ç½‘IP**ï¼š`123.45.67.89`
- **ç”¨æˆ·å**ï¼š`ubuntu`
- **å¯†ç **ï¼š`YourPassword123`

### ç¬¬ä¸€æ¬¡è¿æ¥æ­¥éª¤ï¼š

```bash
# 1. æ‰“å¼€ç»ˆç«¯ï¼ˆmacOSç›´æ¥æœç´¢Terminalï¼‰

# 2. è¾“å…¥SSHè¿æ¥å‘½ä»¤
ssh ubuntu@123.45.67.89

# 3. é¦–æ¬¡è¿æ¥æç¤ºï¼Œè¾“å…¥ yes
Are you sure you want to continue connecting (yes/no)? yes

# 4. è¾“å…¥å¯†ç ï¼ˆè¾“å…¥æ—¶ä¸ä¼šæ˜¾ç¤ºï¼Œç›´æ¥è¾“å…¥å®Œå›è½¦ï¼‰
ubuntu@123.45.67.89's password: YourPassword123

# 5. è¿æ¥æˆåŠŸï¼ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æç¤ºç¬¦
ubuntu@iZbp123456:~$

# 6. ç°åœ¨å¯ä»¥æ‰§è¡Œå‘½ä»¤äº†ï¼Œæ¯”å¦‚è¿è¡ŒDockerå®‰è£…è„šæœ¬
sudo bash install_docker_ubuntu_aliyun.sh
```

## ğŸ“± ç§»åŠ¨è®¾å¤‡è¿æ¥

### iOS
æ¨èAppï¼š**Termius**ã€**Blink Shell**

### Android
æ¨èAppï¼š**JuiceSSH**ã€**Termux**

---

## âœ… è¿æ¥æˆåŠŸåçš„ç¬¬ä¸€ä»¶äº‹

```bash
# 1. æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# 2. å®‰è£…å¸¸ç”¨å·¥å…·
sudo apt install -y vim wget curl git htop

# 3. è¿è¡ŒDockerå®‰è£…è„šæœ¬
sudo bash install_docker_ubuntu_aliyun.sh
```

## ğŸ”— ç›¸å…³é“¾æ¥

- é˜¿é‡Œäº‘ECSæ§åˆ¶å°ï¼šhttps://ecs.console.aliyun.com
- é˜¿é‡Œäº‘SSHå¯†é’¥å¯¹æ–‡æ¡£ï¼šhttps://help.aliyun.com/document_detail/51792.html
- é˜¿é‡Œäº‘å®‰å…¨ç»„é…ç½®ï¼šhttps://help.aliyun.com/document_detail/25471.html

---

æœ‰é—®é¢˜éšæ—¶é—®æˆ‘ï¼ğŸ‰

